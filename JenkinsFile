pipeline {
    agent any
        options {
        timeout(time: 60, unit: 'SECONDS')
        }
    triggers {
        cron('0 8 * * *')   // Runs once a day
        // If you prefer a fixed time, use: cron('0 0 * * *')
    }
    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/jamwil907/JayErvin_M4Assgn1.git' // gitlab repository that utilizes php
                }
    }

stage('BAT Dependency Check') {
    steps {
        sh '''
            echo "Checking .bat files dependencies..."

            # Check if any .bat files exist
            if ls *.bat >/dev/null 2>&1; then
                echo "Found .bat files:"
                ls *.bat

                # Check that each .bat file is not empty
                for FILE in *.bat; do
                    if [ ! -s "$FILE" ]; then
                        echo "ERROR: $FILE is empty!"
                        exit 1
                    fi
                done

                echo "All .bat files exist and are non-empty."
            else
                echo "WARNING: No .bat files found in the project."
            fi
        '''
    }
}
        stage('Deliver') {
            steps {
                echo 'Deliver....'
                sh '''
                echo "package delivery.."
                '''
            }
        }
    }
    post {
        success {
            echo "Pipeline completed successfully!"
        }
        failure {
            echo "Pipeline failed. Check the logs for errors."
        }
        always {
            echo "This will always run, regardless of success or failure."
        }
    }
}
