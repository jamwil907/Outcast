pipeline {
    agent any
        options {
        timeout(time: 60, unit: 'SECONDS')
        }
    triggers {
        cron('0 8 * * *')   // Runs once a day
        // If you prefer a fixed time, use: cron('0 0 * * *')
    }
    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/jamwil907/JayErvin_M4Assgn1.git' // gitlab repository that utilizes php
                }
    }
        stage('Static Code Analysis') {
            steps {
                withSonarQubeEnv('SonarQube') {       //Using Sonarqube
                    sh '''
                        echo "Running SonarQube Analysis for Outcast..."
                        sonar-scanner \
                          -Dsonar.projectKey=Outcast \
                          -Dsonar.projectName=Outcast \
                          -Dsonar.sources=. \
                          -Dsonar.sourceEncoding=UTF-8
                    '''
                }
            }
        }

        stage('Deliver') {
            steps {
                echo 'Deliver....'
                sh '''
                echo "package delivery.."
                '''
            }
        }
    }
}
